<!DOCTYPE html>
<!--suppress ALL -->
<html>

<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>User Disabler</title>

</head>

<body>

    <div id="dhis-header-bar"></div>

    <!-- Inactive User Job Status Section -->
    <div id="inactive-user-job-section" class="job-section" style="margin-bottom: 20px; background: #f8f8f8; border-bottom: 1px solid #ddd; padding: 16px 12px 8px 12px;">
        <div id="job-status-content">
            <!-- Filled dynamically by JS -->
        </div>
    </div>

    <div class="mainView">
        <div class="filter-wrapper">
            <label for="periodType">Period inactive</label>
            <select id="periodType">
                <option value="months">Months</option>
                <option value="years">Years</option>
                <option value="date">Since date</option>
            </select>

            <input type="number" id="numPeriods" min="1" value="6" style="display: inline-block;">
            <input type="date" id="specificDate" style="display: none;">

            <label for="includeNeverLoggedIn">
                <input type="checkbox" id="includeNeverLoggedIn"> Include users who never logged in
            </label>

            <label for="includeDisabledUsers">
                <input type="checkbox" id="includeDisabledUsers"> Include already disabled users
            </label>


            <button id="applyFilterBtn" class="dhis2-button blue">Apply Filter</button>
        </div>

    <table id="usersTable" class="display compact nowrap order-column">
            <thead>
                <tr>
                    <th><input type="checkbox" id="select-all"></th>
                    <th>Username</th>
                    <th>First Name</th>
                    <th>Surname</th>
                    <th>Disabled</th>
                    <th>Created</th>
                    <th>Last Login</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Filled dynamically by JS -->
            </tbody>
        </table>

        <!-- Modal for creating a new DISABLE_INACTIVE_USERS job -->
        <div id="createJobModal" class="modal">
            <div class="modal-content">
                <span class="close-create-job">&times;</span>
                <h3>Create Disable Inactive Users Job</h3>
                <form id="createJobForm">
                    <label for="jobName">Name:</label>
                    <input type="text" id="jobName" name="jobName" value="Disable inactive users" required><br>
                    <label for="inactiveMonths">Inactive Months:</label>
                    <input type="number" id="inactiveMonths" name="inactiveMonths" value="6" min="1" required><br>
                    <label for="reminderDaysBefore">Reminder Days Before:</label>
                    <input type="number" id="reminderDaysBefore" name="reminderDaysBefore" value="7" min="0" required><br>
                    <label for="cronExpression">Cron Expression:</label>
                    <input type="text" id="cronExpression" name="cronExpression" value="0 0 20 ? * *" required><br>
                    <button type="submit" class="dhis2-button blue">Create Job</button>
                </form>
            </div>
        </div>
        
        <button id="bulkDisableBtn" class="dhis2-button red">Bulk Disable</button>
        <div id="user-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="userInfo">
                    <!-- Filled dynamically by JS -->
                </div>
            </div>
        </div>

        <div id="summaryModal" class="modal">
            <div class="modal-content">
                <span class="close-summary">&times;</span>
                <div id="summaryContent">
                    <!-- Filled dynamically by JS -->
                </div>
                <button id="closeSummaryBtn">Close</button>
            </div>
        </div>

        <!-- Confirmation modal for bulk disabling -->
        <div id="confirmationModal" class="modal">
            <div class="modal-content">
                <span class="close-confirm">&times;</span>
                <div id="confirmationContent">
                    <!-- Confirmation info will be displayed here -->
                </div>
                <button id="confirmBulkDisableBtn" class="dhis2-button red">Confirm</button>
                <button id="cancelBulkDisableBtn" class="dhis2-button">Cancel</button>
            </div>
        </div>

        <!-- Progress modal for showing status updates during bulk operations -->
        <div id="progressModal" class="modal">
            <div class="modal-content">
                <span class="close-progress">&times;</span>
                <div id="progressContent">
                    <!-- Progress updates will be displayed here -->
                </div>
                <button id="closeProgressBtn" class="dhis2-button">Close</button>
            </div>
        </div>

        <div id="singleUserModal" class="modal">
            <div class="modal-content">
                <span class="close-single-user">&times;</span>
                <div id="singleUserModalContent">
                    <!-- Success/Error message will be displayed here -->
                </div>
            </div>
        </div>

    </div>
</body>

</html>